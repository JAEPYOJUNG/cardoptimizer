<!DOCTYPE html>
<html>
  <head>
    <% include ../partials/head %>


    <script>
        var today = new Date();
        $(document).ready(function() {
           $("#countx").val($("tr[name=jaepyo]").length + "개");



        //정렬
        $('th').each(function (column) {
		      $(this).click(function() {
		              if($(this).is('.descend')) {
		                  $(this).removeClass('descend');
		                  $(this).addClass('ascend');
		                  sortdir=1;
		              } else {
		                 $(this).addClass('descend');
		                 $(this).removeClass('acend');
		                 sortdir=-11;
		              }
		              $(this).siblings().removeClass('ascend');
		              $(this).siblings().removeClass('descend');

		             var rec = $('table').find('tbody>tr').get();
		             rec.sort(function (a, b) {
		                  var val1 = $(a).children('td').eq(column).text().toUpperCase();
		                  var val2 = $(b).children('td').eq(column).text().toUpperCase();
		                  return (val1 < val2)?-sortdir:(val1>val2)?sortdir:0;
		             });
		             $.each(rec, function(index, row) {
		                  $('tbody').append(row);
		               });
		         });
		     });



        });
      </script>



  </head>
  <body onload="init();">
    <% include ../partials/nav %>

    <div class="container mycardlists mycardlists-index">
      <h2>My Card List</h2>
      <!-- <ul class="list-group"> -->

          <div class="container contact contact-show">
              <div class="contact-menu">
                <a class="btn btn-default" href="/mycardlists/new">Add New</a>
                <input class="form-control" type="text" id="countx" name="countx" style="width:200px"  disabled >
              <div>

                <h1> 목록</h1>
                <div class="form-group col-xs-2">
                    <label for="sel1">필터</label>
                    <select class="form-control" id="name">
                      <% mycardlists.forEach(function(mycardlist) { %>

                      <option value = "<%= mycardlist.person_name %> "><%= mycardlist.person_name %></option>
                        <% }) %>
                    </select>
                </div>

          <table border="0" class="table table-striped">
            <thead>
              <!-- <tr style="text-align: center"> -->
                  <th style="text-align: center" style="width:100px">소유자</th>
                  <th style="text-align: center" style="width:100px">발급사</th>
                  <th style="text-align: center" style="width:100px">받은날</th>
                  <th style="text-align: center" style="width:100px">해지일</th>
                  <th  style="width:400px">비 고</th>

              <!-- </tr> -->
            </thead>



        <tbody id="tablebody">
         <% mycardlists.forEach(function(mycardlist) { %>

             <tr style="text-align: center" name="jaepyo">

               <td style="width:100px">
                <span><%= mycardlist.person_name %></span>
               </td>

            <td style="width:100px"><a href="/mycardlists/<%= mycardlist._id %>"><%= mycardlist.issuer %></a></td>

            <td style="width:100px"><span><%= mycardlist.received_date %></span></td>

            <td style="width:100px"><span><%= mycardlist.discard_date %></span> </td style="width:100px">

            <td style="width:100px"><span><%= mycardlist.comments %></span></td>

            </tr>
         <% }) %>
</tbody>

          </table>



    </div>
  </body>
</html>
